{"ast":null,"code":"import { FormServiceService } from \"../form-service.service\";\nimport { FormArray, FormBuilder, FormControl, FormGroup, Validators } from \"@angular/forms\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../form-service.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\n\nfunction DynamicFormComponentComponent_div_3_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const control_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", control_r1.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(control_r1.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"name\", control_r1.name)(\"id\", control_r1.name)(\"formControlName\", control_r1.name);\n  }\n}\n\nfunction DynamicFormComponentComponent_div_3_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const control_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", control_r1.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(control_r1.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"name\", control_r1.name)(\"id\", control_r1.name)(\"formControlName\", control_r1.name);\n  }\n}\n\nfunction DynamicFormComponentComponent_div_3_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 9);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const control_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", control_r1.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(control_r1.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"name\", control_r1.name)(\"id\", control_r1.name)(\"formControlName\", control_r1.name);\n  }\n}\n\nfunction DynamicFormComponentComponent_div_3_div_4_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"input\", 10);\n    i0.ɵɵelementStart(2, \"label\", 6);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const option_r15 = ctx.$implicit;\n    const control_r1 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"name\", control_r1.name)(\"id\", control_r1.name)(\"formControlName\", control_r1.name)(\"value\", option_r15.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", control_r1.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(option_r15.label);\n  }\n}\n\nfunction DynamicFormComponentComponent_div_3_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, DynamicFormComponentComponent_div_3_div_4_div_3_Template, 4, 6, \"div\", 1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const control_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", control_r1.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(control_r1.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", control_r1.options);\n  }\n}\n\nfunction DynamicFormComponentComponent_div_3_div_5_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const option_r20 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r20.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", option_r20.label, \" \");\n  }\n}\n\nfunction DynamicFormComponentComponent_div_3_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"select\", 11);\n    i0.ɵɵtemplate(4, DynamicFormComponentComponent_div_3_div_5_option_4_Template, 2, 2, \"option\", 12);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const control_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", control_r1.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(control_r1.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"name\", control_r1.name)(\"id\", control_r1.name)(\"formControlName\", control_r1.name)(\"value\", control_r1.options[0].value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", control_r1.options);\n  }\n}\n\nfunction DynamicFormComponentComponent_div_3_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 14);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const control_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", control_r1.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(control_r1.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"name\", control_r1.name)(\"id\", control_r1.name)(\"formControlName\", control_r1.name);\n  }\n}\n\nfunction DynamicFormComponentComponent_div_3_div_7_div_4_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const nestedControl_r24 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", nestedControl_r24.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(nestedControl_r24.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"name\", nestedControl_r24.name)(\"id\", nestedControl_r24.name)(\"formControlName\", nestedControl_r24.name);\n  }\n}\n\nfunction DynamicFormComponentComponent_div_3_div_7_div_4_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 9);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const nestedControl_r24 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", nestedControl_r24.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(nestedControl_r24.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"name\", nestedControl_r24.name)(\"id\", nestedControl_r24.name)(\"formControlName\", nestedControl_r24.name);\n  }\n}\n\nfunction DynamicFormComponentComponent_div_3_div_7_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, DynamicFormComponentComponent_div_3_div_7_div_4_div_1_Template, 4, 5, \"div\", 3);\n    i0.ɵɵtemplate(2, DynamicFormComponentComponent_div_3_div_7_div_4_div_2_Template, 4, 5, \"div\", 3);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const nestedControl_r24 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", nestedControl_r24.type === \"text\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", nestedControl_r24.type === \"number\");\n  }\n}\n\nfunction DynamicFormComponentComponent_div_3_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtext(1, \" ---------------------------------------- \");\n    i0.ɵɵelementStart(2, \"label\", 6);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, DynamicFormComponentComponent_div_3_div_7_div_4_Template, 3, 2, \"div\", 1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const control_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"formGroupName\", control_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"for\", control_r1.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(control_r1.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", control_r1.value);\n  }\n}\n\nfunction DynamicFormComponentComponent_div_3_div_9_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"div\", 15);\n    i0.ɵɵtext(3, \" Primary Skill \");\n    i0.ɵɵelement(4, \"input\", 17);\n    i0.ɵɵtext(5, \" Secondary Skill \");\n    i0.ɵɵelement(6, \"input\", 17);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const i_r32 = ctx.index;\n    const ctx_r30 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Skill \", i_r32 + 1, \" : \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroupName\", i_r32);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"formControlName\", ctx_r30.primarySkill);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"formControlName\", ctx_r30.secondarySkill);\n  }\n}\n\nfunction DynamicFormComponentComponent_div_3_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r34 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" ---------------------------------------- \");\n    i0.ɵɵtemplate(2, DynamicFormComponentComponent_div_3_div_9_div_2_Template, 7, 4, \"div\", 1);\n    i0.ɵɵelement(3, \"hr\");\n    i0.ɵɵelementStart(4, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function DynamicFormComponentComponent_div_3_div_9_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r33 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r33.addMoreSkills());\n    });\n    i0.ɵɵtext(5, \"Add More Skill\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r10.skills.controls);\n  }\n}\n\nfunction DynamicFormComponentComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, DynamicFormComponentComponent_div_3_div_1_Template, 4, 5, \"div\", 3);\n    i0.ɵɵtemplate(2, DynamicFormComponentComponent_div_3_div_2_Template, 4, 5, \"div\", 3);\n    i0.ɵɵtemplate(3, DynamicFormComponentComponent_div_3_div_3_Template, 4, 5, \"div\", 3);\n    i0.ɵɵtemplate(4, DynamicFormComponentComponent_div_3_div_4_Template, 4, 3, \"div\", 3);\n    i0.ɵɵtemplate(5, DynamicFormComponentComponent_div_3_div_5_Template, 5, 7, \"div\", 3);\n    i0.ɵɵtemplate(6, DynamicFormComponentComponent_div_3_div_6_Template, 4, 5, \"div\", 3);\n    i0.ɵɵtemplate(7, DynamicFormComponentComponent_div_3_div_7_Template, 5, 4, \"div\", 4);\n    i0.ɵɵelementContainerStart(8, 5);\n    i0.ɵɵtemplate(9, DynamicFormComponentComponent_div_3_div_9_Template, 6, 1, \"div\", 3);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const control_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", control_r1.type === \"text\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", control_r1.type === \"textarea\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", control_r1.type === \"number\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", control_r1.type === \"radio\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", control_r1.type === \"select\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", control_r1.type === \"checkbox\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", control_r1.type === \"formGroup\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formArrayName\", ctx_r0.skills);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", control_r1.type === \"formArray\");\n  }\n}\n\nexport let DynamicFormComponentComponent = /*#__PURE__*/(() => {\n  class DynamicFormComponentComponent {\n    constructor(formService, fb) {\n      this.formService = formService;\n      this.fb = fb;\n      this.formGroupMap = {};\n      this.formService.getFormStructure().subscribe(formContent => {\n        console.log(formContent);\n        this.formContent = formContent;\n        this.intializeFormGroup(formContent);\n        this.formTest = this.fb.group({\n          employee: this.fb.array([{\n            firstName: ['']\n          }])\n        });\n      });\n    }\n\n    onFormSubmission() {\n      console.log(this.dynamicFormGroup.value);\n    }\n\n    ngAfterViewInit() {}\n\n    intializeFormGroup(formContent) {\n      formContent.forEach(formTypeControl => {\n        if (![\"formGroup\", \"formArray\"].includes(formTypeControl.type)) {\n          if ((formTypeControl === null || formTypeControl === void 0 ? void 0 : formTypeControl.validations.length) > 0) {\n            this.formControlValidators = formTypeControl.validations.reduce((acc, currentvalue) => {\n              if (currentvalue.name === \"required\") {\n                acc.push(Validators.required);\n              }\n\n              return acc;\n            }, []);\n          }\n\n          this.formGroupMap[formTypeControl.name] = new FormControl(formTypeControl.value || \"\", this.formControlValidators);\n        } else if (formTypeControl.type == \"formGroup\") {\n          this.formGroupMap[formTypeControl.name] = new FormGroup(formTypeControl.value.reduce((acc, v) => {\n            acc[v.name] = new FormControl(v.value || \"\", v.validations.reduce((accumulator, validation) => {\n              if (validation.name === \"required\") {\n                accumulator.push(Validators.required);\n              }\n\n              return accumulator;\n            }, []));\n            return acc;\n          }, {}));\n        } else {\n          this.formGroupMap[formTypeControl.name] = new FormArray([new FormGroup({\n            primarySkill: new FormControl(\"123\"),\n            secondarySkill: new FormControl(\"asqw\")\n          })]);\n          /*\n          new FormGroup(\n              (formTypeControl.value as IFormStructureInterface[]).reduce(\n                (a, v) => {\n                  a[v.name] = new FormControl(\n                    v.value,\n                    v.validations.reduce((accumulator, validation) => {\n                      if (validation.name === \"required\") {\n                        accumulator.push(Validators.required);\n                      }\n                      return accumulator;\n                    }, [])\n                  );\n                  return a;\n                },\n                {}\n              )\n            ),\n          */\n        }\n      });\n      this.dynamicFormGroup = new FormGroup(this.formGroupMap);\n      console.log(\"Dynamic Form\");\n      console.log(this.dynamicFormGroup);\n      this.dynamicFormGroup.valueChanges.subscribe(v => {\n        console.log(\"Value Changes\");\n        console.log(v);\n      });\n      this.dynamicFormGroup.statusChanges.subscribe(v => {\n        console.log(\"Status Changes\");\n        console.log(v);\n      });\n    }\n\n    addMoreSkills() {\n      this.dynamicFormGroup.controls[\"skills\"].push(new FormGroup({\n        primarySkill: new FormControl(\"\", Validators.required),\n        secondarySkill: new FormControl(\"\", Validators.required)\n      }));\n    }\n\n    get skills() {\n      return this.dynamicFormGroup.get('skills');\n    }\n\n  }\n\n  DynamicFormComponentComponent.ɵfac = function DynamicFormComponentComponent_Factory(t) {\n    return new (t || DynamicFormComponentComponent)(i0.ɵɵdirectiveInject(i1.FormServiceService), i0.ɵɵdirectiveInject(i2.FormBuilder));\n  };\n\n  DynamicFormComponentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DynamicFormComponentComponent,\n    selectors: [[\"app-dynamic-form-component\"]],\n    decls: 6,\n    vars: 3,\n    consts: [[3, \"formGroup\", \"ngSubmit\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\", 3, \"disabled\"], [4, \"ngIf\"], [3, \"formGroupName\", 4, \"ngIf\"], [3, \"formArrayName\"], [3, \"for\"], [\"type\", \"text\", 3, \"name\", \"id\", \"formControlName\"], [\"type\", \"textarea\", 3, \"name\", \"id\", \"formControlName\"], [\"type\", \"number\", 3, \"name\", \"id\", \"formControlName\"], [\"type\", \"radio\", 3, \"name\", \"id\", \"formControlName\", \"value\"], [\"type\", \"select\", 3, \"name\", \"id\", \"formControlName\", \"value\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [\"type\", \"checkbox\", 3, \"name\", \"id\", \"formControlName\"], [3, \"formGroupName\"], [\"type\", \"button\", 3, \"click\"], [\"type\", \"text\", 3, \"formControlName\"]],\n    template: function DynamicFormComponentComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h1\");\n        i0.ɵɵtext(1, \"Dynamic form\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"form\", 0);\n        i0.ɵɵlistener(\"ngSubmit\", function DynamicFormComponentComponent_Template_form_ngSubmit_2_listener() {\n          return ctx.onFormSubmission();\n        });\n        i0.ɵɵtemplate(3, DynamicFormComponentComponent_div_3_Template, 10, 9, \"div\", 1);\n        i0.ɵɵelementStart(4, \"button\", 2);\n        i0.ɵɵtext(5, \"Submit\");\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"formGroup\", ctx.dynamicFormGroup);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.formContent);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", !(ctx.dynamicFormGroup == null ? null : ctx.dynamicFormGroup.valid));\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i2.ɵNgNoValidate, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.DefaultValueAccessor, i2.NumberValueAccessor, i2.CheckboxControlValueAccessor, i2.SelectControlValueAccessor, i2.RadioControlValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i2.FormGroupName, i2.FormArrayName]\n  });\n  return DynamicFormComponentComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}